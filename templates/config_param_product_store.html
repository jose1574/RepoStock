{% extends 'base.html' %}

{% from 'macros/store_select_form.html' import store_select_form %}

{% block content %}
  {{ store_select_form(stores, url_for('config_param_product'), title='Seleccionar Depósito', description='Por favor, selecciona el depósito donde deseas configurar los parámetros del producto', select_label='Tienda de destino', submit_label='Seleccionar Tienda', select_name='store_code') }}

  <script>
    // Añadir confirmación global usando el formulario renderizado por el macro
    (function(){
      const form = document.getElementById('store-select-form');
      if (!form) return;
      form.addEventListener('submit', function(e){
        const confirmMsg = 'Estas a punto de configurar los parámetros para la tienda seleccionada. ¿Deseas continuar?';
        if (!window.confirm(confirmMsg)){
          e.preventDefault();
          const sel = form.querySelector('select');
          if (sel) sel.focus();
        }
      });
    })();
  </script>

{% endblock %}